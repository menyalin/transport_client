<template>
  <v-alert variant="outlined" density="compact">
    Сумма: <b>{{ total }}</b
    ><br />

    Сумма без НДС: <b> {{ totalWOVat }}</b> Сумма НДС:
    <b>{{ vatSum }}</b> Кол-во рейсов: <b>{{ ordersCount }}</b>
  </v-alert>
</template>
<script lang="ts">
//@ts-nocheck
import { defineComponent } from 'vue'
import { computed } from 'vue'

import { moneyFormatter } from '@/shared/utils/moneyFormatter'
export default defineComponent({
  name: 'PaymentInvoiceResult',
  props: {
    orders: { type: Array, required: true, default: () => [] },
  },
  setup(props) {
    const total = computed(() => {
      const sum = props.orders.reduce(
        (res, item) => res + item?.savedTotal?.price,
        0
      )
      return moneyFormatter(sum)
    })
    const totalWOVat = computed(() => {
      const sum = props.orders.reduce(
        (res, item) => res + item?.savedTotal?.priceWOVat,
        0
      )
      return moneyFormatter(sum)
    })
    const vatSum = computed(() => {
      const sum = props.orders.reduce(
        (res, item) => res + item?.savedTotal?.price,
        0
      )
      const sumWOVat = props.orders.reduce(
        (res, item) => res + item?.savedTotal?.priceWOVat,
        0
      )
      return moneyFormatter(sum - sumWOVat)
    })
    const ordersCount = computed(() => {
      // const ordersOnly = orders.filter((i) => i.itemType !== 'paymentPart')
      return props.orders.filter((i) => i.itemType !== 'paymentPart').length
    })

    return { total, totalWOVat, vatSum, ordersCount }
  },
})
</script>
<style scoped></style>
